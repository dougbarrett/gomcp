---
phase: 01-analysis
plan: 01
type: execute
---

<objective>
Map the wizard template structure and generator logic to establish a complete understanding of how wizard scaffolding works.

Purpose: Create a reference document that captures the current wizard implementation so subsequent phases have clear targets for fixes.
Output: WIZARD-STRUCTURE.md document in the phase directory capturing all template files, their purposes, data flow, and generated output structure.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./01-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/ARCHITECTURE.md

Wizard template files:
@internal/templates/wizard/controller.go.tmpl
@internal/templates/wizard/draft_service.go.tmpl
@internal/templates/wizard/draft_repository.go.tmpl
@internal/templates/wizard/draft_model.go.tmpl
@internal/templates/wizard/wizard_view.templ.tmpl
@internal/templates/wizard/step_form.templ.tmpl
@internal/templates/wizard/step_select.templ.tmpl
@internal/templates/wizard/step_has_many.templ.tmpl
@internal/templates/wizard/step_summary.templ.tmpl

Generator:
@internal/tools/scaffold_wizard.go
@internal/generator/data.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document wizard template file structure</name>
  <files>.planning/phases/01-analysis/WIZARD-STRUCTURE.md</files>
  <action>
Read all 9 wizard template files in internal/templates/wizard/ and document:

1. **Template Inventory**
   - List each template file with its purpose
   - Document what output file each generates
   - Identify the output path pattern for each

2. **Template Data Requirements**
   - For each template, identify what data fields it expects (e.g., .WizardName, .Steps, .ModulePath)
   - Note any conditional sections (if .WithDrafts, range .Steps, etc.)
   - Document dependencies between templates

3. **Generated Output Structure**
   - Show the directory structure that scaffold_wizard creates
   - Map template -> output file for a hypothetical wizard

Create WIZARD-STRUCTURE.md with clear sections for each of the above.
  </action>
  <verify>cat .planning/phases/01-analysis/WIZARD-STRUCTURE.md shows all 9 templates documented with their purposes and data requirements</verify>
  <done>WIZARD-STRUCTURE.md exists with comprehensive template inventory, data requirements, and output structure documented</done>
</task>

<task type="auto">
  <name>Task 2: Document scaffold_wizard.go generator logic</name>
  <files>.planning/phases/01-analysis/WIZARD-STRUCTURE.md</files>
  <action>
Read internal/tools/scaffold_wizard.go and internal/generator/data.go to document the generator logic. Append to WIZARD-STRUCTURE.md:

1. **Input Validation**
   - What inputs are required vs optional
   - What validation is performed
   - Error conditions

2. **Data Transformation**
   - How ScaffoldWizardInput is transformed to WizardData
   - What defaults are applied
   - How step data is processed

3. **Generation Flow**
   - Order of file generation
   - Conditional generation (when drafts enabled/disabled)
   - Directory creation sequence

4. **Post-Generation**
   - What next steps are suggested
   - What's NOT automated (manual wiring required)

Focus on understanding the data flow from input -> templates -> output.
  </action>
  <verify>grep -A 5 "Generator Logic" .planning/phases/01-analysis/WIZARD-STRUCTURE.md confirms generator section exists</verify>
  <done>WIZARD-STRUCTURE.md includes generator logic section documenting input validation, data transformation, generation flow, and post-generation steps</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] WIZARD-STRUCTURE.md exists in .planning/phases/01-analysis/
- [ ] All 9 wizard templates are documented with purposes
- [ ] Template data requirements are captured
- [ ] Generator logic flow is documented
- [ ] Document is readable and useful as reference for subsequent phases
</verification>

<success_criteria>

- All tasks completed
- WIZARD-STRUCTURE.md provides complete picture of wizard scaffolding
- Document can serve as reference for identifying issues in Plan 01-02
</success_criteria>

<output>
After completion, create `.planning/phases/01-analysis/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Map Wizard Structure Summary

**[One-liner capturing what was accomplished]**

## Accomplishments

- [Key findings documented]

## Files Created/Modified

- `.planning/phases/01-analysis/WIZARD-STRUCTURE.md` - Wizard template and generator documentation

## Decisions Made

[None expected for analysis phase]

## Issues Encountered

[Any difficulties in understanding the templates]

## Next Step

Ready for 01-02-PLAN.md - Compare patterns and document issues
</output>
