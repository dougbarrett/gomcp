---
phase: 08-end-to-end-validation
plan: 02
type: execute
---

<objective>
Verify the generated wizard code compiles without errors and the application runs.

Purpose: Prove the template fixes from Phase 2-3 produce working code.
Output: Compiled binary, successful templ generation, running server.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-end-to-end-validation/08-01-SUMMARY.md

# Test project location: /tmp/wizard-test-project

**Compilation Steps:**
1. go mod tidy - resolve dependencies
2. templ generate - generate Go from templ files
3. go build ./... - compile all packages

**Key Bug Fixes to Confirm Compiled:**
- #a9479784: Controller now uses Redirect, c.render, middleware.GetCSRFToken
- #cb94adf6: Service now imports wizarddraftrepo
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compile the generated code</name>
  <files>/tmp/wizard-test-project/</files>
  <action>
Execute compilation sequence in /tmp/wizard-test-project:

1. Run `go mod tidy` to resolve dependencies
2. Run `templ generate` to generate Go code from templ files
3. Run `go build ./...` to compile all packages

If any step fails:
- Capture the error output
- Identify which file/line caused the failure
- This indicates a template fix is incomplete

Do NOT attempt to fix issues - document them for analysis.
  </action>
  <verify>
- go mod tidy completes without errors
- templ generate produces *.templ.go files
- go build ./... completes with exit code 0
- No "undefined" or "cannot find" errors in output
  </verify>
  <done>All compilation steps pass without errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Compiled wizard application ready to run</what-built>
  <how-to-verify>
1. In terminal, cd to /tmp/wizard-test-project
2. Run: go run ./cmd/web/main.go
3. Visit: http://localhost:8080 (or whatever port is configured)
4. Navigate to: /orders/wizard/create_order (or check routes in main.go)
5. Confirm:
   - Wizard page loads without 500 error
   - Step navigation appears
   - No blank screens or panics in terminal

Note: Database tables may not exist (no migration run), but routes should respond.
  </how-to-verify>
  <resume-signal>Type "approved" if wizard routes work, or describe any errors</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] go mod tidy succeeds
- [ ] templ generate succeeds
- [ ] go build ./... succeeds (exit code 0)
- [ ] Human verified server starts and wizard routes respond
</verification>

<success_criteria>

- All compilation steps pass
- Generated wizard controller compiles (proves bug #a9479784 fixed)
- Generated draft service compiles (proves bug #cb94adf6 fixed)
- Server starts and wizard routes are accessible
</success_criteria>

<output>
After completion, create `.planning/phases/08-end-to-end-validation/08-02-SUMMARY.md`:

# Phase 8 Plan 2: Verify Compilation and Functionality Summary

**[Substantive one-liner - "Generated wizard code compiles and runs successfully"]**

## Accomplishments

- go mod tidy: [pass/fail]
- templ generate: [pass/fail]
- go build ./...: [pass/fail]
- Server starts: [yes/no]
- Wizard routes respond: [yes/no]

## Compilation Output

[Key output or "No errors"]

## Bug Fix Verification

| Bug | Fix | Verified |
|-----|-----|----------|
| #a9479784 | Controller compiles | [yes/no] |
| #cb94adf6 | Service compiles | [yes/no] |

## Issues Encountered

[Any issues or "None"]

## Next Step

Ready for 08-03-PLAN.md (bug closure)
</output>
