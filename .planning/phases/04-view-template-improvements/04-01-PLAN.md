---
phase: 04-view-template-improvements
plan: 01
type: execute
---

<objective>
Review and improve wizard view templates for consistency with scaffold_view patterns.

Purpose: Align wizard view templates with established domain view patterns to ensure consistency across all scaffolding tools.
Output: Documented pattern analysis and any necessary template improvements.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-analysis/ANALYSIS-FINDINGS.md
@.planning/phases/01-analysis/WIZARD-STRUCTURE.md
@.planning/phases/02-controller-template-fixes/02-02-SUMMARY.md
@.planning/phases/03-service-template-fixes/03-01-SUMMARY.md

# Wizard view templates:
@internal/templates/wizard/wizard_view.templ.tmpl
@internal/templates/wizard/step_form.templ.tmpl
@internal/templates/wizard/step_select.templ.tmpl
@internal/templates/wizard/step_has_many.templ.tmpl
@internal/templates/wizard/step_summary.templ.tmpl

# Reference domain templates for patterns:
@internal/templates/views/form.templ.tmpl
@internal/templates/views/list.templ.tmpl

**Context from prior phases:**
- Phase 2-3: Fixed critical controller and service bugs
- All compilation-blocking issues resolved
- VIEW-001: "Inconsistent component usage patterns" (low severity)

**Scope Note:**
Analysis shows wizard view templates are functional with no compilation issues.
This phase is lighter than previous phases - focus on consistency improvements.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document wizard view pattern analysis</name>
  <files>.planning/phases/04-view-template-improvements/VIEW-ANALYSIS.md</files>
  <action>
Compare wizard view templates against domain view templates (views/form.templ.tmpl, views/list.templ.tmpl).

Document in VIEW-ANALYSIS.md:

1. **Component usage comparison:**
   - List all components used by wizard templates
   - List all components used by domain view templates
   - Identify any missing or inconsistent usage

2. **Props pattern comparison:**
   - Wizard props structure vs domain props structure
   - Helper methods (domain uses getBasePath(), wizard doesn't)
   - BasePath handling differences

3. **HTMX pattern comparison:**
   - Form submission patterns (hx-post, hx-target, hx-swap)
   - Navigation patterns
   - Search/filter patterns

4. **Identified improvements:**
   - List any improvements worth making
   - For each, note: location, current pattern, proposed pattern, impact
   - Categorize as: worth fixing, optional, or skip

Consider that wizard templates serve a different purpose (multi-step create flow) than domain templates (CRUD operations). Some differences are intentional and appropriate.

Do NOT suggest changes that would break existing functionality or require significant refactoring.
  </action>
  <verify>cat .planning/phases/04-view-template-improvements/VIEW-ANALYSIS.md shows complete analysis with clear recommendations</verify>
  <done>VIEW-ANALYSIS.md exists with component comparison, pattern analysis, and prioritized improvement list</done>
</task>

<task type="auto">
  <name>Task 2: Apply prioritized template improvements</name>
  <files>internal/templates/wizard/*.templ.tmpl (only if improvements identified)</files>
  <action>
Based on VIEW-ANALYSIS.md recommendations, apply improvements categorized as "worth fixing".

For each improvement:
1. Read the current template
2. Make the targeted change
3. Verify the change doesn't break template syntax

Focus areas (if improvements identified):
- Component consistency (e.g., missing WizardEmpty vs inline empty state)
- Props structure improvements
- Comment clarity for TODOs

Important constraints:
- Do NOT change working patterns to match domain templates if the difference is intentional
- Do NOT add features or functionality beyond consistency improvements
- Do NOT refactor for the sake of refactoring
- If no meaningful improvements are identified in Task 1, document "No changes required" in the summary

Wizards are intentionally different from CRUD views:
- Multi-step flow vs single-page operations
- Create-only vs full CRUD
- Draft persistence vs immediate save
  </action>
  <verify>If changes made: Templates still valid (no syntax errors in [[ ]] delimiters). If no changes: VIEW-ANALYSIS.md clearly states no improvements needed.</verify>
  <done>Either: (a) Identified improvements applied and templates valid, or (b) No improvements needed documented</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] VIEW-ANALYSIS.md exists with complete comparison
- [ ] All recommended improvements (if any) applied
- [ ] Templates maintain valid Go template syntax
- [ ] No regressions introduced
</verification>

<success_criteria>

- VIEW-ANALYSIS.md documents pattern comparison
- Improvements (if any) applied to templates
- Templates remain syntactically valid
- Phase 4 complete, ready for Phase 5
</success_criteria>

<output>
After completion, create `.planning/phases/04-view-template-improvements/04-01-SUMMARY.md`:

# Phase 4 Plan 1: View Template Improvements Summary

**[One-liner: What was accomplished]**

## Accomplishments

- [Pattern analysis complete]
- [Improvements applied or none needed]

## Files Created/Modified

- `.planning/phases/04-view-template-improvements/VIEW-ANALYSIS.md` - Pattern comparison
- [Template files if modified]

## Decisions Made

[Any decisions about what to fix vs leave]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 4 complete, ready for Phase 5: Draft System Review
</output>
