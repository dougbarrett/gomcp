package components

import (
	"[[.ModulePath]]/internal/web/components"
)

// [[.ComponentName]]Props contains properties for the [[.ComponentName]] component.
type [[.ComponentName]]Props struct {
	[[- range .Props]]
	[[.Name]] [[.Type]]
	[[- end]]
	Class string
}

// [[.ComponentName]] renders a card component.
templ [[.ComponentName]](props [[.ComponentName]]Props) {
	@components.Card(components.CardProps{Class: props.Class}) {
		@components.CardHeader("") {
			<div class="flex items-center justify-between">
				<div>
					[[- range .Props]]
					[[- if eq .Name "Title"]]
					if props.Title != "" {
						<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
							{ props.Title }
						</h3>
					}
					[[- end]]
					[[- if eq .Name "Subtitle"]]
					if props.Subtitle != "" {
						<p class="text-sm text-gray-500 dark:text-gray-400">
							{ props.Subtitle }
						</p>
					}
					[[- end]]
					[[- end]]
				</div>
				{ children... }
			</div>
		}
		@components.CardContent("") {
			{ children... }
		}
	}
}

// [[.ComponentName]]WithActions renders a card with action buttons.
templ [[.ComponentName]]WithActions(props [[.ComponentName]]Props, editURL string, deleteURL string) {
	@components.Card(components.CardProps{Class: "hover:shadow-md transition-shadow " + props.Class}) {
		@components.CardHeader("") {
			<div class="flex items-center justify-between">
				<div>
					[[- range .Props]]
					[[- if eq .Name "Title"]]
					if props.Title != "" {
						<h3 class="font-semibold text-gray-900 dark:text-white">
							{ props.Title }
						</h3>
					}
					[[- end]]
					[[- end]]
				</div>
				<div class="flex items-center gap-1">
					if editURL != "" {
						@components.Button(components.ButtonProps{
							Variant: "ghost",
							Size:    "sm",
							Attributes: templ.Attributes{
								"hx-get":    editURL,
								"hx-target": "#modal-container",
								"hx-swap":   "innerHTML",
							},
						}) {
							@components.Icon("pencil", "h-4 w-4")
						}
					}
					if deleteURL != "" {
						@components.Button(components.ButtonProps{
							Variant: "ghost",
							Size:    "sm",
							Attributes: templ.Attributes{
								"hx-delete":  deleteURL,
								"hx-confirm": "Are you sure you want to delete this item?",
								"hx-target":  "closest .card",
								"hx-swap":    "outerHTML swap:300ms",
							},
						}) {
							@components.Icon("trash", "h-4 w-4 text-red-500")
						}
					}
				</div>
			</div>
		}
		@components.CardContent("") {
			{ children... }
		}
	}
}

// [[.ComponentName]]Simple renders a simple card without header.
templ [[.ComponentName]]Simple(props [[.ComponentName]]Props) {
	@components.Card(components.CardProps{Class: props.Class}) {
		@components.CardContent("") {
			{ children... }
		}
	}
}

// [[.ComponentName]]Clickable renders a clickable card.
templ [[.ComponentName]]Clickable(props [[.ComponentName]]Props, href string) {
	<div
		class="cursor-pointer"
		hx-get={ href }
		hx-target="#main-content"
		hx-push-url="true"
	>
		@components.Card(components.CardProps{Class: "hover:shadow-md hover:border-blue-500 transition-all " + props.Class}) {
			@components.CardContent("") {
				{ children... }
			}
		}
	</div>
}

// [[.ComponentName]]Stats renders a stats card.
templ [[.ComponentName]]Stats(title string, value string, change string, changeType string) {
	@components.Card(components.CardProps{}) {
		@components.CardContent("") {
			<div class="space-y-2">
				<p class="text-sm font-medium text-gray-500 dark:text-gray-400">
					{ title }
				</p>
				<p class="text-3xl font-bold text-gray-900 dark:text-white">
					{ value }
				</p>
				if change != "" {
					<div class="flex items-center gap-1 text-sm">
						if changeType == "up" {
							@components.Icon("trending-up", "h-4 w-4 text-green-500")
							<span class="text-green-500">{ change }</span>
						} else if changeType == "down" {
							@components.Icon("trending-down", "h-4 w-4 text-red-500")
							<span class="text-red-500">{ change }</span>
						} else {
							<span class="text-gray-500">{ change }</span>
						}
					</div>
				}
			</div>
		}
	}
}
